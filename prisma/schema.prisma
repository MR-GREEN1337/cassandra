generator client {
  provider = "prisma-client-js"
  output   = "../src/generated/prisma"
  engineType      = "wasm"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

// Model for the startup failure data
model StartupFailure {
  id                      Int     @id @default(autoincrement())
  companyName             String  @map("company_name")
  failureReason           String? @map("failure_reason") @db.VarChar(191)
  summary                 String? @db.Text // Make summary optional to align with long-form
  summaryVector           Unsupported("VECTOR(1536)")? @map("summary_vector")
  whatTheyDid             String? @map("what_they_did") @db.Text
  whatWentWrong           String? @map("what_went_wrong") @db.Text
  keyTakeaway             String? @map("key_takeaway") @db.VarChar(512)
  sourceUrl               String? @map("source_url")

  @@map("startup_failures")
}

// --- NEW MODEL FOR THE AGENT'S FRONTIER ---
model SearchFrontier {
  id        Int      @id @default(autoincrement())
  query     String   @unique
  status    Status   @default(pending)
  createdAt DateTime @default(now()) @map("created_at")

  @@map("search_frontier")
}

// --- ENUM FOR THE STATUS FIELD ---
enum Status {
  pending
  completed
  failed
}