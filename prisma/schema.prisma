generator client {
  provider = "prisma-client-js"
  output   = "../src/generated/prisma"
  engineType      = "wasm"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

// Model for the startup failure data
model StartupFailure {
  id              Int     @id @default(autoincrement())
  companyName     String  @map("company_name")
  
  failureReason   String? @db.Text @map("failure_reason")
  summary         String? @db.Text
  whatTheyDid     String? @db.Text @map("what_they_did")
  whatWentWrong   String? @db.Text @map("what_went_wrong")
  keyTakeaway     String? @db.Text @map("key_takeaway")

  sourceUrl       String? @map("sourceUrl") @db.VarChar(1000) // Good practice to limit URL length
  summary_vector  Json?

  @@fulltext([companyName])
  @@fulltext([failureReason])
  @@fulltext([summary])
  @@fulltext([whatWentWrong])
  @@map("startup_failures")
}

model SearchFrontier {
  id        Int      @id @default(autoincrement())
  query     String   @unique
  status    Status   @default(pending)
  createdAt DateTime @default(now()) @map("created_at")

  @@map("search_frontier")
}

// --- ENUM FOR THE STATUS FIELD ---
enum Status {
  pending
  completed
  failed
}